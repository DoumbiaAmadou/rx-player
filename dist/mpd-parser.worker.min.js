!function(){"use strict";let e=0,n=0;const t=self;let r=null,o=null,a=null;t.onmessage=function(t){const{data:s}=t;if(0===s.type)(function(e){const n={env:{memoryBase:0,tableBase:0,memory:new WebAssembly.Memory({initial:10}),table:new WebAssembly.Table({initial:2,element:"anyfunc"}),onTagOpen:f,onCustomEvent:m,onAttribute:u,readNext:y,onTagClose:p}},t=fetch(e);return("function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(t,n):Promise.reject("`WebAssembly.instantiateStreaming` API not available")).catch((async e=>{c({type:1,message:`Unable to call \`instantiateStreaming\` on WASM: ${e instanceof Error?e.toString():"unknown error"}`});const r=await t;if(r.status<200||r.status>=300){throw new Error("WebAssembly request failed. status: "+String(r.status))}const o=await r.arrayBuffer();return WebAssembly.instantiate(o,n)})).then((e=>{r=e,o=r.instance.exports.memory}))})(s.wasmUrl).then((()=>c({type:0}))).catch((e=>{c({type:2,message:e instanceof Error?e.toString():"Unknown initialization error"})}));else if(1===s.type){try{!function(t){if(n=0,e=0,null===r)throw new Error("DashWasmParser not initialized");if(l)throw new Error("Parsing operation already pending.");l=!0,a={mpd:t,cursor:0};try{r.instance.exports.parse()}catch(e){throw l=!1,e}l=!1,console.error("!!!!!!!! Parse TIMER",e,n)}(s.mpd)}catch(e){return void c({type:3,message:e instanceof Error?e.toString():"Unknown parsing error"})}c({type:4})}else if(2===s.type){try{!function(e){if(null===r)throw new Error("DashWasmParser not initialized");if(l)throw new Error("Parsing operation already pending.");l=!0,a={mpd:e,cursor:0};try{r.instance.exports.parse_xlink()}catch(e){throw l=!1,e}l=!1}(s.xlink)}catch(e){return void c({type:5,message:e instanceof Error?e.toString():"Unknown parsing error"})}c({type:6})}};const s=[],i=[];function c(e){if(s.push(e),e.type<=10)t.postMessage(s,i),s.length=0,i.length=0;else{let n=!1;if(e.type>20){const t=e.payload;i.push(t),n=n||t.byteLength>100}n&&(t.postMessage(s,i),s.length=0,i.length=0)}}let l=!1;function f(n){const t=performance.now();c({type:11,tag:n}),e+=performance.now()-t}function p(n){const t=performance.now();c({type:12,tag:n}),e+=performance.now()-t}function u(n,t,r){const s=performance.now();let i;if(69!==n)i=o.buffer.slice(t,t+r);else{if(null===a)return;const e=new DataView(o.buffer),n=e.getFloat64(t,!0),r=e.getFloat64(t+8,!0);i=a.mpd.slice(n,r)}c({type:22,attribute:n,payload:i}),e+=performance.now()-s}function m(n,t,r){const a=performance.now(),s=o.buffer.slice(t,t+r);0===n&&console.warn((new TextDecoder).decode(s)),1===n&&c({type:21,payload:s}),e+=performance.now()-a}function y(e,t){const r=performance.now();if(null===a)throw new Error("DashWasmParser Error: No MPD to read.");const{mpd:s,cursor:i}=a,c=Math.min(t,15e3,s.byteLength-i);return new Uint8Array(o.buffer,e,c).set(new Uint8Array(s,i,c)),a.cursor+=c,n+=performance.now()-r,c}}();